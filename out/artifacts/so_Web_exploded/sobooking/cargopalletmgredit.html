<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>我的现舱</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  

	<link rel="stylesheet" href="/so/res/static/css/index.css?t=31">
	
	<link rel="stylesheet" href="/so/res/layui/css/layui.css">
	
	
	<link rel="stylesheet" href="/so/res/layui/layui-formSelects/formSelects-v4.css">
	<script src="/so/res/static/js/jquery.min.js"></script>
	
	<script src="/so/res/layui/layui.js"></script>
	<script src="/so/res/static/js/jquery.cookie.js?t=1"></script>
	<script src="/so/admin/js/ufms.common.js?t=13" ></script>
	<script src="/so/res/static/js/index.js?t=14"></script>
	<script src="/so/res/static/js/xm-select.js?t=1"></script>
	<script src="/so/admin/js/jquery.i18n.properties-min-1.0.9.js"></script>
  
  <link rel="stylesheet" href="ufms.common.css">
  <script src="ufms.common.js?t=7" ></script>
  <script src="ufms.gridform.js?t=18" ></script>
	    

</head>
<body>
  <!-- main部分 -->
  <div class="main-product" style="padding-top: 1px;">
	<form id="editForm" class="layui-form" lay-filter="editForm" style="width: 651px;">
			<div class="layui-form-item">
				<label for="L_username" class="layui-form-label">
	                <span class="we-red">*</span>POL
	            </label>
				<div class="layui-input-block">
					<select id="pol" name="pol" lay-search="" lay-verify="required" xm-select="checkbox_pol" xm-select-search="" xm-select-radio="" xm-select-skin="normal" m-select-height="36px" >
				    	<option value=""><span class="translate">起运港</span></option>
				    </select>
				</div>
			</div>
			
			<div class="layui-form-item">
				<label for="L_email" class="layui-form-label">
	                <span class="we-red">*</span>POD
	            </label>
				<div class="layui-input-block">
					<select id="pod" name="pod" lay-search="" lay-verify="required" xm-select="checkbox_pod" xm-select-search="" xm-select-radio="" xm-select-skin="normal" m-select-height="36px">
				    	<option value=""><span class="translate">目的港</span></option>
				    </select>
				</div>
			</div>
			
			
			<div class="layui-form-item" >
			    <label class="layui-form-label">预计出运起</label>
			    <div class="layui-input-inline">
			       <input type="text" id="etdstart" name="etdstart"  lay-verify="required" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input">
			    </div>
			    <label class="layui-form-label">预计出运止</label>
			    <div class="layui-input-inline">
			       <input type="text" id="etdend" name="etdend" lay-verify="required" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input">
			    </div>
			</div>
			
			<div class="layui-form-item" >
		       <label class="layui-form-label">FCL/LCL</label>
			    <div class="layui-input-inline">
			       <input type="text" id="cntype" name="cntype" lay-verify="required" autocomplete="off" class="layui-input">
			    </div>
			    
			    <label class="layui-form-label">箱量箱型</label>
			    <div class="layui-input-inline">
			       <input type="text" id="cntdesc" name="cntdesc" lay-verify="required" autocomplete="off" class="layui-input">
			    </div>
			    
			</div>
			
			<div class="layui-form-item" >
		       <label class="layui-form-label">货物描述</label>
			    <div class="layui-input-block">
			       <input type="text" id="goodsdesc" name="goodsdesc" lay-verify="required" autocomplete="off" class="layui-input">
			    </div>
			</div>
			
			
			<div class="layui-form-item" >
		       <label class="layui-form-label">联系人</label>
			    <div class="layui-input-block">
			       <input type="textarea" id="contacter" name="contacter" lay-verify="required" autocomplete="off" class="layui-input">
			    </div>
			</div>
			
			<div class="layui-form-item" >
			 <label class="layui-form-label">联系人电话</label>
			    <div class="layui-input-block">
			       <input type="textarea" id="tel" name="tel" autocomplete="off" lay-verify="required" class="layui-input">
			    </div>
			</div>
			<div class="layui-form-item" >
			    <label class="layui-form-label">联系人QQ</label>
			    <div class="layui-input-block">
			        <input type="textarea" id="qq" name="qq" lay-verify="required" autocomplete="off" class="layui-input">
			    </div>
			</div>
			<div class="layui-form-item" >
		       <label class="layui-form-label">备注</label>
			    <div class="layui-input-block">
			       <input type="textarea" id="remarks" name="remarks"  autocomplete="off" class="layui-input">
			    </div>
			</div>
			
			<div class="layui-form-item ufms-form-hide">
			    <label for="" class="layui-form-label">pkid</label>
			    <div class="layui-input-block" id="">
			      <input type="text" name="id" class="layui-input">
			      <input type="text" id="userid" name="userid" class="layui-input">
			    </div>
			</div>
	
			<button class="layui-btn" lay-filter="save" lay-submit="">保存</button>
			<button class="layui-btn" lay-filter="del" lay-submit="">删除</button>
			<button class="layui-btn" lay-filter="close" lay-submit="">关闭</button>
			<input type="hidden" name="dataId" id="dataId" value="" />
		</form>
</div>  

<script>
<!--
var action = '/cargopallet';

layui.use(['form','formSelects', 'jquery','layer', 'laydate'], function() {
	var form = layui.form,
	formSelects = layui.formSelects,
	$ = layui.jquery,
	laydate = layui.laydate,
	layer = layui.layer;

	//日期
	 laydate.render({
	   elem: '#etdstart'
	 });
	 laydate.render({
	   elem: '#etdend'
	 });

	 randerfromselect('/sobooking','sopolall?type=ship','checkbox_pol',formSelects,false);
	 randerfromselect('/sobooking','sopodall?type=ship','checkbox_pod',formSelects,false);


	//监听提交
	form.on('submit(save)', function(data) {
		console.log(data);
		var jsonData = JSON.stringify(data.field);
		console.log(jsonData);
		$.ajax({
			  type: 'POST',
			  url: "/so/cargopallet?method=save",
			  contentType:'application/json',
			  data: jsonData,
			  success: function(res){
					parent.closeEdit();
			  }
		});
		
		return false;
	});
	//监听提交
	form.on('submit(del)', function(data) {
		$.ajax({
			  type: 'POST',
			  url: "/so/cargopallet?method=del&id="+data.field.id,
			  success: function(res){
					parent.closeEdit();
			  }
		});
		
		return false;
	});

	init();

	function init(){
		var type = getRequest().type;
		var id = getRequest().id;
		if('edit' == type){
			$.ajax({
				  type: 'GET',
				  url: getAction()+"?method=find&id="+id,
				  success: function(res){
				  	var jsonData = JSON.parse(res);
				  	console.log(jsonData);
				  	jsonData = JSON.parse(jsonData.data);
				  	console.log(jsonData);
				  	jsonData.userid = $.cookie('userid');
					var form = layui.form;
					form.val('editForm',jsonData);
					
					form.render();
					setTimeout(function(){
						formSelects.value('checkbox_pol', [jsonData.pol]);
						formSelects.value('checkbox_pod', [jsonData.pod]);
					}, 500);
					
				  }
			});	
		}else{

			$.ajax({
				  type: 'GET',
				  url: getAction()+"?method=add",
				  success: function(res){
				  	var jsonData = JSON.parse(res);
				  	console.log(jsonData);
				  	jsonData = JSON.parse(jsonData.data);
				  	console.log(jsonData);
				  	jsonData.contacter = jsonData.contacter;
				  	jsonData.tel = jsonData.tel;
					var form = layui.form;
					form.val('editForm',jsonData);
					form.render();
					$('#userid').val($.cookie('userid'));
				  }
			});	
			
		}
	}

	form.on('submit(close)', function(data) {
		parent.closeEdit();
		return false;
	});
});
--></script>

<script>
$(function () {
	
});


</script>
</body>
</html>